# Kamal 2 production configuration
# Deploy with: kamal deploy -d production

servers:
  web:
    hosts:
      - wordlegroup.com
  job:
    hosts:
      - wordlegroup.com
    cmd: php artisan horizon

proxy:
  ssl: true
  host: wordlegroup.com
  healthcheck:
    path: /up
    interval: 30
    timeout: 5

env:
  clear:
    APP_ENV: production
    APP_DEBUG: "false"
    APP_URL: https://wordlegroup.com
    LOG_CHANNEL: stack
    LOG_LEVEL: error
    DB_CONNECTION: mysql
    DB_HOST: 172.17.0.1
    DB_PORT: 3306
    DB_DATABASE: wordle_group
    REDIS_HOST: 172.17.0.1
    REDIS_PORT: 6379
    CACHE_STORE: redis
    SESSION_DRIVER: redis
    QUEUE_CONNECTION: redis
  secret:
    - APP_KEY
    - DB_USERNAME
    - DB_PASSWORD

volumes:
  - /var/data/wordle-group/storage:/var/www/html/storage
